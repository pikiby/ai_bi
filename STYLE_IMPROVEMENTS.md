# Улучшения системы стилей таблиц

## Внесенные изменения

### 1. Автоматический подбор контрастных цветов текста
- **Функция**: `_build_css_styles()`
- **Логика**: Анализ яркости фона и автоматический выбор темного/светлого текста
- **Результат**: Светлый фон → темный текст, темный фон → светлый текст

### 2. Полупрозрачные цвета по умолчанию
- **Стандартные стили**: `rgba(240, 240, 240, 0.8)` вместо `#f0f0f0`
- **Промпт для бота**: Обновлены примеры с `rgba()` форматом
- **Результат**: Все цветовые выделения полупрозрачные

### 3. Улучшенная генерация стилей ботом
- **Промпт**: Добавлены примеры с `rgba()` и инструкции по прозрачности
- **Правила**: Всегда использовать `rgba()` с прозрачностью 0.5-0.9
- **Автоматика**: Цвета текста подбираются автоматически

## Технические детали

### Алгоритм контрастности
```python
def get_contrast_color(bg_color):
    # Вычисление яркости: (R*299 + G*587 + B*114) / 1000
    brightness = (r * 299 + g * 587 + b * 114) / 1000
    return "#000000" if brightness > 128 else "#ffffff"
```

### Поддерживаемые форматы
- `rgba(r, g, b, alpha)` - основной формат
- `#hex` - с автоматическим анализом яркости
- `transparent` - прозрачный фон

### Примеры использования
```python
# Полупрозрачные стили
table_style = {
    "header_fill_color": "rgba(255, 0, 0, 0.7)",
    "cells_fill_color": "rgba(173, 216, 230, 0.6)",
    "align": "center"
}
```

## Результат
- ✅ Контрастные цвета текста автоматически
- ✅ Полупрозрачные выделения по умолчанию  
- ✅ Бот генерирует правильные `rgba()` цвета
- ✅ Улучшенная читаемость таблиц
